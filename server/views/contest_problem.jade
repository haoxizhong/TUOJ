extends contest_layout

append head
	script(type="text/x-mathjax-config") MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });
	script(type='text/javascript' src='/bower_components/MathJax/MathJax.js?config=TeX-AMS_HTML')

block content_contest
	- var statusMap = { "Accepted": "success", "Wrong Answer": "danger", "Time Limit Exceeded": "warning", "Memory Limit Exceeded": "warning", "Runtime Error": "warning", "Compilation Error": "primary", "No Source": "warning", "Dangerous Program": "primary", "Waiting": "info", "Running": "info", "Compilation Success": "info", "Running success": "success", "Compile error": "primary", "Running timeout": "warning", "Running error": "warning" }
	- var statusText = { "Accepted": "AC", "Wrong Answer": "WA", "Time Limit Exceeded": "TLE", "Memory Limit Exceeded": "MLE", "Runtime Error": "RE", "Compilation Error": "CE", "No Source": "NS", "Dangerous Program": "DP", "Waiting": "W", "Running": "R", "Compilation Success": "CS", "Running success": "AC", "Compile error": "CE", "Running timeout": "TLE", "Running error": "RE" }
	div.row
		div.col-xs-8
			div.panel.panel-default
				div.panel-body
					h2.text-center #{title}
					p !{description}
		div.col-xs-4
			div.panel.panel-default
				div.panel-heading
					p 最近递交 
						small.pull-right 已递交#{submitted_times}次, 剩余#{10-submitted_times}次
				div.panel-body
					table.table.table-hover
						thead
							tr
								th 递交时间
								th 状态
								th 得分
						tbody
							- for (var i in judge_status) {
								- var now=judge_status[i]
								- if (i > 8 && now._id != best_solution) continue;
								tr
									td
										small #{now.submitted_time}
									td 
										a(href='/contests/#{contestid}/detail/#{now._id}')
											span.label(class='label-#{statusMap[now.status]}') #{statusText[now.status]} 
										- if (best_solution && now._id == best_solution) {
											span.label.label-success 最好递交
										- }
									td #{now.score}
							- }
			- if (submitted_times < 10) {
				form(method='POST',action='/contests/#{contestid}/problems/#{problemid}/upload',enctype='multipart/form-data')
					div.panel.panel-default
						div.panel-heading
							p 递交
						div.panel-body
							div.form-group
								label 请选择语言
								select.form-control(name='language')
									- for (var i in langs) {
										option(value='#{langs[i]}')= langs[i]
									- }
							div.form-group
								label 请选择答案文件
								input.form-control(name='inputfile',type='file',multiple='multiple')
						div.panel-footer
							div.form-group
								input.btn.btn-success(type='submit' value='递交评测(剩余#{10 - submitted_times}次)')
			- } else {
				div.panel.panel-default
					div.panel-heading
						p 递交
					div.panel-body
						p 很遗憾, 您已用尽本题目的所有递交机会
			- }
